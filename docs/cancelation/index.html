<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ember-concurrency</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
<meta name="dummy/config/environment" content="%7B%22modulePrefix%22%3A%22dummy%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%2F%22%2C%22locationType%22%3A%22auto%22%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Afalse%2C%22_TEMPLATE_ONLY_GLIMMER_COMPONENTS%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22ember-concurrency%22%2C%22version%22%3A%222.3.0%2Bf76b0e7f%22%7D%2C%22fastboot%22%3A%7B%22hostWhitelist%22%3A%5B%7B%7D%2C%22ember-concurrency.com%22%5D%7D%2C%22exportApplicationGlobal%22%3Afalse%7D" />
<!-- EMBER_CLI_FASTBOOT_TITLE -->

    <link integrity="" rel="stylesheet" href="/assets/vendor-e754b247f0b14ad5fde0f302404dd7cb.css">
    <link integrity="" rel="stylesheet" href="/assets/dummy-57e0f95836c2c702fadf0c8166e5d1e5.css">
    <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

    
  </head>
  <body>
    <script type="x/boundary" id="fastboot-body-start"></script><div class="container navbar">
  <div class="row">
    <div class="ten columns">
      <h3 style="float:left;">
        ember-concurrency

        <span style="font-size: 0.5em;">
          (v 2.3.0)
        </span>
      </h3>
    </div>
    <div class="one columns">
      <div class="nav-bar-link-outer">
        <a href="/api">API</a>
      </div>
    </div>
    <div class="one columns">
      <div class="nav-bar-link-outer">
        <a href="https://github.com/machty/ember-concurrency" target="_blank" rel="noopener noreferrer">GitHub</a>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="docs row">
    <div class="three columns">
      <div class="side-menu">
            <div class="toc-entry">
                <a id="ember466" class="ember-view" href="/docs/introduction">Home</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember467" class="ember-view" href="/docs/installation">Installation</a>
            </div>


<!---->            <div class="toc-section-title">
              Introduction
            </div>
            <div class="toc-entry">
                <a id="ember468" class="ember-view" href="/docs/tutorial">Writing Code Without Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember469" class="ember-view" href="/docs/tutorial/discussion">Post-Mortem</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember470" class="ember-view" href="/docs/tutorial/refactor">Refactoring With Tasks</a>
            </div>


<!---->            <div class="toc-section-title">
              Reference
            </div>
            <div class="toc-entry">
                <a id="ember471" class="ember-view" href="/docs/task-function-syntax">Task Function Syntax</a>
            </div>


                <div class="toc-entry toc-subentry">
                  <a id="ember472" class="ember-view" href="/docs/typescript">TypeScript</a>
                </div>
            <div class="toc-entry">
                <a id="ember473" class="ember-view" href="/docs/task-concurrency">Managing Task Concurrency</a>
            </div>


                <div class="toc-entry toc-subentry">
                  <a id="ember474" class="ember-view" href="/docs/task-concurrency-advanced">Advanced</a>
                </div>
            <div class="toc-entry">
                <a id="ember475" class="ember-view active" href="/docs/cancelation">Cancellation</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember476" class="ember-view" href="/docs/error-vs-cancelation">Handling Errors</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember477" class="ember-view" href="/docs/child-tasks">Child Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember478" class="ember-view" href="/docs/task-groups">Task Groups</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember479" class="ember-view" href="/docs/derived-state">Derived State</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember480" class="ember-view" href="/docs/events">Awaiting Events / Conditions</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember481" class="ember-view" href="/docs/testing-debugging">Testing &amp; Debugging</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember482" class="ember-view" href="/docs/faq">FAQ &amp; Fact Sheet</a>
            </div>


<!---->            <div class="toc-section-title">
              Advanced
            </div>
            <div class="toc-entry">
                <a id="ember483" class="ember-view" href="/docs/advanced/lifecycle-events">Lifecycle Events</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember484" class="ember-view" href="/docs/advanced/task-modifiers">Task Modifiers</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember485" class="ember-view" href="/docs/advanced/yieldables">Yieldables / Controlling Execution</a>
            </div>


<!---->            <div class="toc-section-title">
              Examples
            </div>
            <div class="toc-entry">
                <a id="ember486" class="ember-view" href="/docs/examples/loading-ui">Loading UI</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember487" class="ember-view" href="/docs/examples/autocomplete">Type-Ahead Search</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember488" class="ember-view" href="/docs/examples/increment-buttons">Accelerating Increment Buttons</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember489" class="ember-view" href="/docs/examples/ajax-throttling">AJAX Throttling</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember490" class="ember-view" href="/docs/examples/route-tasks">Route Tasks</a>
            </div>


<!---->            <div class="toc-entry">
                <a id="ember491" class="ember-view" href="/docs/examples/joining-tasks">Awaiting Multiple Child Tasks</a>
            </div>


<!---->      </div>
    </div>
    <div class="nine columns">
      <div class="row">
    <p class="u-pull-left">
      Previous: <a id="ember492" class="ember-view" href="/docs/task-concurrency-advanced">Advanced</a>
    </p>

    <p class="u-pull-right">
      Next: <a id="ember493" class="ember-view" href="/docs/error-vs-cancelation">Handling Errors</a>
    </p>
</div>

      <a class="github-edit" href="https://github.com/machty/ember-concurrency/edit/master/tests/dummy/app/docs/cancelation/template.hbs" title="Edit on GitHub">
  <i class="icon-pencil"></i>
</a>


      <h3>Cancellation</h3>

<p>
  <strong>ember-concurrency</strong> tasks can be canceled either
  <em>explicitly</em> (by calling one of the cancel methods
  on a task or task instance) or <em>implicitly</em> (based on
  how the task is configured, or because the task's host object
  was destroyed).
</p>

<h4>How ember-concurrency cancels task functions</h4>

<p>
  You may be aware that async functions in JavaScript are not cancellable, i.e. if you
  call an async function, you can't externally cause that async function to stop running
  (unless you're making explicit use of cancel tokens or some other mechanism).
</p>

<p>
  ember-concurrency's <code>task()</code> API is built around async arrow functions, so you might
  be wondering, how does e-c get around this limitation? The answer is that behind the scenes,
  ember-concurrency uses a Babel transform to convert your async arrow function into a
  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generator Function</a>,
  which are able to be cancelled.
</p>

<h4>Implict Cancelation via Task Modifiers</h4>

<p>
  Generally speaking, it is <em>much</em> better to configure your tasks properly
  (via <a id="ember494" class="ember-view" href="/docs/task-concurrency">Task Modifiers</a>)
  such that they'll be implicitly/automatically canceled at
  the right time, but there are still some cases where
  explicit cancelation is the only option.
</p>

<h4>Explicit Cancelation</h4>

<p>
  There are two ways to explicitly cancel a task:
</p>

<ol>
  <li>
    Call <code>task.cancelAll()</code> on the Task object â€”
    this will cancel all running or enqueued Task Instances for that
    task.
  </li>
  <li>
    Call <code>taskInstance.cancel()</code> on a Task Instance
    (the object returned from a prior call to <code>task.perform()</code>)
  </li>
</ol>

<h4>Example</h4>

<h5>Running tasks: 0</h5>

<button type="button">Perform Task</button>
<!----><!---->
<p>
  <em>
    Tip: You can also use the <code>.numRunning</code> property to get
    the current number of running task instances for a given task,
    e.g. <code>{{myTask.numRunning}}</code>: 0
  </em>
</p>

<pre id="ember495" class="htmlbars ember-view">&lt;h5&gt;Running tasks: {{this.count}}&lt;/h5&gt;

&lt;button type="button" {{on "click" this.performTask}}&gt;Perform Task&lt;/button&gt;
{{#if this.count}}
  &lt;button type="button" {{on "click" this.cancelAll}}&gt;Cancel All&lt;/button&gt;
{{/if}}
{{#if this.mostRecent.isRunning}}
  &lt;button type="button" {{on "click" this.cancelMostRecent}}&gt;Cancel Most Recent&lt;/button&gt;
{{/if}}
</pre>
<pre id="ember496" class="javascript ember-view">export default class CancelationController extends Controller {
  count = 0;
  mostRecent = null;

  myTask = task(this, async () =&gt; {
    try {
      this.incrementProperty('count');
      await forever;
    } finally {
      // finally blocks always get called,
      // even when the task is being canceled
      this.decrementProperty('count');
    }
  });

  @action
  performTask() {
    let task = this.myTask;
    let taskInstance = task.perform();
    this.set('mostRecent', taskInstance);
  }

  @action
  cancelAll() {
    this.myTask.cancelAll();
  }

  @action
  cancelMostRecent() {
    this.mostRecent.cancel();
  }
}
</pre>


      <br> <br> <br> <br>

      <div class="row">
    <p class="u-pull-left">
      Previous: <a id="ember497" class="ember-view" href="/docs/task-concurrency-advanced">Advanced</a>
    </p>

    <p class="u-pull-right">
      Next: <a id="ember498" class="ember-view" href="/docs/error-vs-cancelation">Handling Errors</a>
    </p>
</div>

    </div>
  </div>
</div>


<div id="ember499" class="ember-notify-cn ember-notify-default ember-view"><!----></div>
<script type="x/boundary" id="fastboot-body-end"></script>

    <script src="/assets/vendor-c87daf15e3c643f8beb7674a8e2b98ba.js"></script>
    <script src="/assets/dummy-11c8f8cf467145c82bb5f43a4cb120f5.js"></script>

    
  </body>
</html>
